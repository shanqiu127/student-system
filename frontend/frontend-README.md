# 学生管理系统 - 前端项目

## 🎨 UI 设计说明

### 登录 & 注册页面
- **设计风格**：简约现代风格，紫色渐变背景 + 白色半透明卡片
- **配色方案**：紫色渐变背景 (#667eea → #764ba2)，白色卡片 (95% 不透明度)
- **交互效果**：输入框焦点动效、按钮悬停效果、平滑过渡动画
- **登录功能**：用户名/密码登录，支持角色判断（管理员/普通用户）
- **注册功能**：
  - 用户名、密码、确认密码
  - 邮箱验证（支持任意邮箱域名）
  - 邮箱验证码（60秒倒计时）
  - 图形验证码（点击刷新）
  - 服务条款同意
  - 防刷机制（5次失败后锁定30秒）

### 服务条款页面
- **设计风格**：简约文档风格，与登录页面保持一致
- **内容精简**：6个核心章节，一句话概括要点
- **交互**：返回按钮、邮箱链接

### 学生管理页面
- **设计风格**：深色顶部导航栏 + 白色内容区
- **顶部导航**：系统Logo、标题、用户菜单（包含退出登录）
- **工具栏**：搜索框、下载模板、一键导入学生
- **表格展示**：学号、姓名、性别、班级、监护人手机号、状态、操作
- **分页控件**：总数显示、每页条数选择、上下页切换、跳转功能
- **数据隔离**：每个用户只能查看和管理自己的学生数据

### 管理员控制台
- **设计风格**：独立页面，深色现代风格
- **访问权限**：仅 ROLE_ADMIN 角色可访问
- **统计信息**：
  - 总用户数
  - 管理员数量
  - 普通用户数量
  - 学生总数
  - 最新注册用户列表

## 📦 技术栈

- **框架**：React 18.2
- **路由**：React Router DOM 6.14
- **HTTP 客户端**：Axios 1.5
- **图标库**：Lucide React 0.292
- **通知组件**：React Hot Toast 2.4
- **构建工具**：Vite 5.0

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 开发模式运行
```bash
npm run dev
```
前端默认运行在：`http://localhost:3000` (已在 vite.config.js 中配置)

### 生产构建
```bash
npm run build
```

### 预览生产构建
```bash
npm run preview
```

## 🔧 配置说明

### 后端 API 地址配置
默认后端地址：`http://localhost:8080`（MySQL 生产环境）

如需修改，可在 `src/services/api.js` 中调整 `BASE_URL`，或设置环境变量：
```bash
VITE_API_BASE_URL=http://your-backend-url
```

**注意**：H2 测试环境后端运行在 `http://localhost:8081`

## 📁 项目结构

```
src/
├── components/          # 可复用组件
│   ├── StudentForm.jsx  # 学生表单（新建/编辑）
│   └── ConfirmDialog.jsx # 确认对话框
├── layouts/             # 布局组件
│   └── MainLayout.jsx   # 主布局（包含侧边栏和顶部导航）
├── pages/               # 页面组件
│   ├── Login.jsx        # 登录页（简约风格）
│   ├── Register.jsx     # 注册页（邮箱验证 + 图形验证码）
│   ├── ResetPassword.jsx # 重置密码页
│   ├── Terms.jsx        # 服务条款页
│   ├── Students.jsx     # 学生管理页（支持数据隔离）
│   ├── Dashboard.jsx    # 仪表盘（待办事项）
│   └── AdminDashboard.jsx # 管理员控制台（独立页面）
├── services/            # API 服务
│   └── api.js           # Axios 配置与拦截器
├── utils/               # 工具函数
│   ├── auth.js          # Token 存储、角色判断、JWT 解析
│   ├── captcha.js       # 图形验证码生成与验证
│   └── errorHandler.js  # 错误处理工具
├── main.jsx             # 应用入口（路由配置）
└── styles.css           # 全局样式（简约紫色主题）
```

## 🔐 认证机制

### JWT Token 流程
1. 用户登录成功后，后端返回包含角色信息的 JWT token
2. Token 存储在 localStorage 中（同时保存用户名和角色）
3. 后续所有 API 请求自动在 Header 中携带：`Authorization: Bearer {token}`
4. Token 过期或无效时（401/403），自动清除并跳转登录页
5. 前端通过解析 JWT 获取用户角色信息

### 路由守卫与角色控制
- `/login`、`/register`、`/reset-password`、`/terms` - 公开访问
- `/admin` - ROLE_ADMIN 角色专属（独立路由，不使用 MainLayout）
- `/app/*` - ROLE_USER 角色访问（需要登录认证）
- 根路径 `/` 根据用户角色智能重定向：
  - 未登录 → `/login`
  - 管理员 → `/admin`
  - 普通用户 → `/app/students`

## 🎯 核心功能

### 用户认证
- ✅ 用户登录（JWT 认证）
- ✅ 用户注册（邮箱验证 + 图形验证码）
- ✅ 邮箱验证码发送与验证
- ✅ 图形验证码生成与验证
- ✅ 角色判断与路由跳转
- ✅ 服务条款阅读
- ⏳ 重置密码功能（UI 已完成，后端待实现）

### 学生管理
- ✅ 分页查询学生列表（按用户隔离）
- ✅ 按学号搜索学生
- ✅ 新建学生信息
- ✅ 编辑学生信息
- ✅ 删除学生（带确认对话框）
- ✅ Excel 批量导入学生
- ✅ 下载导入模板
- ✅ 数据隔离（每个用户只能管理自己的学生）

### 待办事项（Dashboard）
- ✅ 查看待办列表
- ✅ 新增待办
- ✅ 切换完成状态
- ✅ 删除待办

### 管理员功能
- ✅ 系统统计数据展示
- ✅ 用户统计（总数、管理员、普通用户）
- ✅ 学生总数统计
- ✅ 最新注册用户列表

## 🎨 样式规范

### 主题色（简约紫色风格）
- **主色调**：`#667eea` (紫色)
- **辅助色**：`#764ba2` (深紫)
- **成功色**：`#10b981` (绿色)
- **危险色**：`#ef4444` (红色)
- **文字色**：`#1f2937` (深灰)
- **次要文字**：`#6b7280` (灰色)
- **边框色**：`#d1d5db` (浅灰)
- **背景色**：`#f3f4f6` (极浅灰)

### 登录/注册/服务条款页面
- **背景渐变**：`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- **卡片背景**：`rgba(255, 255, 255, 0.95)` (白色半透明)
- **输入框背景**：`#f3f4f6` (浅灰)
- **按钮渐变**：`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`

### 管理员控制台
- **背景色**：`#0f172a` (深蓝黑)
- **卡片背景**：`#1e293b` (深灰蓝)
- **强调色**：`#3b82f6` (蓝色)

## 📝 开发注意事项

1. **表单验证**：前端已实现基础验证，与后端验证规则保持一致
2. **错误处理**：统一使用 `react-hot-toast` 显示错误信息
3. **Loading 状态**：所有异步操作都应显示加载状态
4. **响应式设计**：页面已适配桌面端，移动端适配待优化
5. **安全性**：
   - 注册时实现防刷机制（5次失败锁定30秒）
   - 密码强度验证（至少6位，建议包含字母和数字）
   - 用户名格式验证（3-20位，仅字母数字下划线）
   - 图形验证码防机器人
6. **数据隔离**：学生数据按用户隔离，确保数据安全
7. **角色控制**：管理员和普通用户使用完全独立的页面

## 🔗 与后端对接

详细接口文档请参考项目根目录的 `API文档.md`

### 主要接口
**认证相关**
- `POST /api/auth/login` - 用户登录（返回包含角色的 JWT）
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/email/code/send` - 发送邮箱验证码
- `POST /api/auth/email/code/verify` - 验证邮箱验证码

**学生管理**
- `GET /api/students` - 获取学生列表（支持分页、搜索、用户隔离）
- `POST /api/students` - 创建学生
- `PUT /api/students/{id}` - 更新学生
- `DELETE /api/students/{id}` - 删除学生
- `POST /api/students/import` - 导入学生
- `GET /api/students/template` - 下载模板

**管理员功能**
- `GET /api/admin/stats` - 获取系统统计数据

**待办事项**
- `GET /api/todos` - 获取待办列表
- `POST /api/todos` - 创建待办
- `PUT /api/todos/{id}` - 更新待办
- `DELETE /api/todos/{id}` - 删除待办

### 🐛 已知问题

- [ ] 重置密码功能后端接口未实现（前端 UI 已完成）
- [ ] 管理员控制台功能待扩展（如用户管理、权限管理等）
- [ ] 移动端响应式适配待优化

## 🎉 最近更新

### v0.2.0 (2025-11-30)
- ✅ 重构 UI 为简约紫色风格
- ✅ 实现用户注册功能（邮箱验证 + 图形验证码）
- ✅ 实现数据隔离（每个用户独立的学生数据）
- ✅ 实现角色控制（管理员/普通用户）
- ✅ 新增管理员控制台
- ✅ 新增服务条款页面
- ✅ 优化路由逻辑（根据角色智能跳转）

## 📄 许可

本项目仅供学习交流使用
